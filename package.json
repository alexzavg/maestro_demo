{
  "name": "maestro-demo",
  "version": "1.0.0",
  "private": false,
  "description": "Maestro mobile testing demo",
  "scripts": {
    "env:cleanup": "npm run kill:ports && npm run kill:processes && npm run kill:emulators && npm run report:delete",
    "env:setup": "npm run maestro:device:start:android && npm run android:install:wikipedia",
    "env:teardown": "npm run android:uninstall:wikipedia && npm run maestro:device:stop",
    "maestro:inspect": "maestro studio",
    "maestro:test:wikipedia": "maestro test .maestro/flows --config .maestro/configs/wikipedia.config.yaml -e appId=org.wikipedia --format html --output test-results/wikipedia.html",
    
    "kill:ports": ".scripts/kill_ports.sh",
    "kill:processes": ".scripts/kill_processes.sh",
    "kill:emulators": "adb devices | grep emulator | cut -f1 | while read d; do adb -s \"$d\" emu kill; done",

    "maestro:device:start:android": "maestro start-device --platform android --os-version 34 --device-locale en_US",
    "maestro:device:stop": "adb emu kill",

    "android:install:wikipedia": "adb install -t -r -g ./apps/android/wikipedia/wikipedia.apk",
    "android:uninstall:wikipedia": "adb uninstall org.wikipedia || true",

    "report:delete": "rm -rf test-results/*",
    "report:open": "open test-results/wikipedia.html",
    "report:ai:open": "open test-results/*/ai-report-*.spec.html",

    "recordings:delete": "rm -rf recordings/*",
    "maestro:record:wikipedia": "maestro record --local .maestro/flows/wikipedia/LaunchStepper.spec.yaml recordings/LaunchStepper.mp4 --config .maestro/configs/wikipedia.config.yaml -e appId=org.wikipedia"
  },
  "devDependencies": {
    "maestro": "latest"
  }
}
